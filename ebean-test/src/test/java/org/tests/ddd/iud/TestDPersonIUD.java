package org.tests.ddd.iud;

import org.junit.jupiter.api.Test;

public class TestDPersonIUD {

  @Test
  public void test() {

//        GlobalProperties.put("classes", DPerson.class.toString());

//        Currency NZD = Currency.getInstance("NZD");
//
//        DPerson p = new DPerson();
//        p.setFirstName("first");
//        p.setLastName("last");
//        p.setSalary(new Money("12200"));
//        p.setCmoney(new CMoney(new Money("12"), NZD));
//
//        p.setInterval(new Interval(System.currentTimeMillis()-20000, System.currentTimeMillis()));
//
//        DB.save(p);
//
//        Oid<DPerson> id = p.getId();
//        Assert.assertNotNull(id);
//
//        DPerson p2 = DB.find(DPerson.class)
//            .setAutoTune(false)
//            .where().idEq(id)
//            .findOne();
//
//        Assert.assertNotNull(p2);
//        System.out.println(p2);
//        Assert.assertEquals(new Money(12200d), p2.getSalary());
//        Assert.assertNotNull(p2.getCmoney());
//        Assert.assertEquals(new Money("12"), p2.getCmoney().getAmount());
//        Assert.assertEquals(NZD, p2.getCmoney().getCurrency());
//
//
//        Query<DPerson> query = DB.find(DPerson.class)
//            .setAutoTune(false)
//            .where().gt("cmoney.amount",1)
//            .query();
//
//        List<DPerson> list = query.findList();
//        Assert.assertTrue(list.size() >= 1);


  }
}
